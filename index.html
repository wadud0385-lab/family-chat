html>
< = name;
            document.getElementById('login-screen').style.display = 'none';
            // নিজেকে ইউজার লিস্টে যোগ করা (সিম্পল ডেমো)
            addUserToList(name);
            loadMessages();
        }
    }

    function switchChat(chatId) {
        currentChat = chatId;
        document.getElementById('chat-title').innerText = chatId === 'group' ? 'Group Chat' : 'Chat with ' + chatId;
        
        // ট্যাব কালার চেঞ্জ
        document.querySelectorAll('.user-tab').forEach(tab => tab.classList.remove('active-tab'));
        event.target.classList.add('active-tab');
        
        loadMessages();
    }

    function send() {
        const input = document.getElementById('msgInput');
        if (input.value.trim() !== "") {
            db.collection("all_messages").add({
                text: input.value,
                sender: currentUser,
                receiver: currentChat, // 'group' অথবা নির্দিষ্ট নাম
                time: firebase.firestore.FieldValue.serverTimestamp()
            });
            input.value = "";
        }
    }

    function loadMessages() {
        db.collection("all_messages").orderBy("time")
        .onSnapshot((snapshot) => {
            const chatWindow = document.getElementById('chat-window');
            chatWindow.innerHTML = '';
            snapshot.forEach((doc) => {
                const data = doc.data();
                
                // কন্ডিশন: হয় গ্রুপ চ্যাট, না হয় নির্দিষ্ট পার্সনাল চ্যাট
                const isGroup = currentChat === 'group' && data.receiver === 'group';
                const isPrivate = (data.receiver === currentUser && data.sender === currentChat) || 
                                  (data.sender === currentUser && data.receiver === currentChat);

                if (isGroup || isPrivate) {
                    const isMe = data.sender === currentUser;
                    const div = document.createElement('div');
                    div.className = `msg ${isMe ? 'outgoing' : 'incoming'}`;
                    div.innerHTML = `<span class="sender-name">${data.sender}</span>${data.text}`;
                    chatWindow.appendChild(div);
                   
                    /currentUser) addUserToList(data.sender);
                }
            });
            chatWindow.scrollTop = chatWindow.scrollHeight;
        });
    }
           }                                               </
